@using LitvaKebabs.Components;
@using LitvaKebabs.Util;
@page "/ordermenu"

<PageTitle>Order menu</PageTitle>

<h1>Order menu</h1>
<div class="container-fluid align-content-start">
    <div class="align-content-around">
        <PostcodeLookup/>
    </div>

    <p>@ReceiptCount items in receipt</p>
    <ul>
        @foreach (var item in Cart)
        {
            <li>@item.Key @item.Value</li>
        }
    </ul>

    @foreach (var menuItem in Menu.MenuItems)
    {
        <button class="order-button" @onclick="@(e => AddToReceipt(menuItem))">
            <span class="order-button-menu">@menuItem.Key</span>
            <span class="order-button-price">@menuItem.Value</span>
        </button>
    }

    @foreach (var item in Cart)
    {
        cartTotal = cartTotal + item.Value;
    }


    <p>Cart Total: @cartTotal</p>

    <!--<OrderButton/> -->
    <!--<Receipt/>-->
</div>

@code {
    private int ReceiptCount = 0;
    private decimal cartTotal = 0;
    private List<KeyValuePair<string, decimal>> Cart = new();


    private void AddToReceipt(KeyValuePair<string, decimal> item)
    {
        cartTotal = 0;
        Cart.Add(item);
        ReceiptCount++;
    }
}